<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>River CleanUp</title>
  <style>
    * {
      box-sizing: border-box;
    }
    body, html {
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
      background-color: #f4f4f4;
    }

    nav {
      background-color: #2c3e50;
      padding: 10px 20px;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 1000;
    }

    .nav-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      height: 50px;
    }

    nav ul {
      list-style: none;
      padding: 0;
      margin: 0;
      display: flex;
      align-items: center;
    }

    nav ul li {
      margin: 0 15px;
    }

    nav ul li a {
      text-decoration: none;
      color: white;
      transition: color 150ms ease-in-out;
    }

    nav ul li a:hover {
      text-decoration: underline;
      color: black;
    }

    .username-link {
      background-color: rgba(255, 255, 255, 0.1);
      border-radius: 15px;
      padding: 5px 10px !important;
      transition: background-color 0.3s ease;
    }

    .username-link:hover {
      background-color: rgba(255, 255, 255, 0.2);
      color: white !important;
    }

    .sidebar {
      position: fixed;
      top: 0;
      right: 0;
      height: 100vh;
      width: 250px;
      background-color: rgba(128, 128, 128, 0.326);
      backdrop-filter: blur(10px);
      box-shadow: -10px 0 10px rgba(0, 0, 0, 0.1);
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      z-index: 999;
    }

    .sidebar li, .sidebar a {
      width: 100%;
      padding: 15px;
      color: white;
    }

    .menu-btn {
      display: none;
    }

    @media (max-width: 800px) {
      .hideonphone {
        display: none;
      }
      .menu-btn {
        display: block;
      }
    }

    @media (max-width: 400px) {
      .sidebar {
        width: 100%;
      }
    }

    .image-wrapper {
      position: relative;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
      width: 100%;
      height: 100vh;
      margin-top: 60px;
    }

    .image-wrapper video {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .text {
      position: absolute;
      color: rgba(255, 255, 255, 0.9);
      font-size: 3rem;
      font-family: cursive;
      text-shadow: 2px 2px 6px rgba(0, 0, 0, 0.5);
      padding: 20px;
      text-align: center;
    }

    @media (max-width: 768px) {
      .text {
        font-size: 2rem;
      }
    }

    @media (max-width: 480px) {
      .text {
        font-size: 1.5rem;
      }
    }

    .river-cleanup {
      background-color: white;
      padding: 40px 20px;
      margin: 20px auto;
      max-width: 900px;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
    }

    h1 {
      font-size: 2.5em;
      margin-bottom: 20px;
      color: #2d6a4f;
    }

    h2 {
      font-size: 1.8em;
      margin-top: 30px;
      color: #2d6a4f;
    }

    p {
      font-size: 1.1em;
      line-height: 1.6;
      margin-bottom: 20px;
    }

    ul {
      list-style-type: none;
      padding-left: 0;
    }

    ul li {
      font-size: 1.2em;
      margin-bottom: 10px;
    }

    ul li strong {
      color: #2d6a4f;
    }

    a {
      color: #2d6a4f;
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }

    .contact-us {
      margin: 70px 0 0;
      padding: 40px 20px;
    }

    .events-section {
      background-color: #f8f9fa;
      padding: 40px 20px;
      margin: 20px auto;
      max-width: 900px;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .events-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .event-card {
      background-color: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      border-left: 4px solid #2d6a4f;
      transition: transform 0.2s ease-in-out;
      cursor: pointer;
      position: relative;
    }

    .event-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
    }

    .event-card::after {
      content: "Click to view program →";
      position: absolute;
      bottom: 10px;
      right: 15px;
      color: #2d6a4f;
      font-size: 0.9em;
      font-weight: bold;
      opacity: 0.7;
    }

    .event-card.not-logged-in::after {
      content: "Login to view program →";
    }

    .event-date {
      color: #2d6a4f;
      font-weight: bold;
      font-size: 1.1em;
      margin-bottom: 10px;
    }

    .event-address {
      font-size: 1.2em;
      font-weight: bold;
      margin-bottom: 8px;
      color: #333;
    }

    .event-workers {
      color: #666;
      font-size: 0.95em;
      margin-bottom: 10px;
    }

    .event-creator {
      color: #2d6a4f;
      font-size: 0.9em;
      font-style: italic;
      margin-bottom: 10px;
    }

    .no-events {
      text-align: center;
      color: #666;
      font-style: italic;
      padding: 40px 20px;
    }

    .contact-info,
    .contact-form {
      background-color: white;
      padding: 20px;
      margin-bottom: 20px;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .contact-form input,
    .contact-form textarea {
      width: 100%;
      padding: 10px;
      margin-bottom: 20px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }

    .contact-form button {
      background-color: #2d6a4f;
      color: white;
      padding: 10px 15px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    .contact-form button:hover {
      background-color: #1b4d3e;
    }

    footer {
      text-align: center;
      padding: 10px 0;
      background-color: #2c3e50;
      color: white;
    }
  </style>
</head>
<body>
  <nav>
    <div class="nav-container">
      <ul class="sidebar">
        <li onclick="hidesidebar()">
          <a href="#"><svg xmlns="http://www.w3.org/2000/svg" height="30px" viewBox="0 -960 960 960" width="30px" fill="#e3e3e3"><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></a>
        </li>
        <li><a href="#home">Home</a></li>
        <li><a href="#about">About</a></li>
        <li><a href="#events">Events</a></li>
        <li><a href="program">Program</a></li>
        <li><a href="#contact-us">Contact Us</a></li>
        <% if (user) { %>
          <li><a href="#" onclick="event.preventDefault(); logout();" class="username-link">👤 <%= user.name %></a></li>
        <% } else { %>
          <li><a href="/login">Login</a></li>
        <% } %>
      </ul>
      <a href="/en" class="logo-link">
        <img src="https://www.river-cleanup.org/images/logo.png" alt="River CleanUp Logo" class="logo">
      </a>
      <ul>
        <li class="hideonphone"><a href="#home">Home</a></li>
        <li class="hideonphone"><a href="#about">About</a></li>
        <li class="hideonphone"><a href="#events">Events</a></li>
        <li class="hideonphone"><a href="/program">Program</a></li>
        <li class="hideonphone"><a href="#contact-us">Contact Us</a></li>
        <% if (user) { %>
          <li class="hideonphone"><a href="#" onclick="event.preventDefault(); logout();" class="username-link">👤 <%= user.name %></a></li>
        <% } else { %>
          <li class="hideonphone"><a href="/login">Login</a></li>
        <% } %>
        <li class="menu-btn" onclick="showsidebar()">
          <a href="#"><svg xmlns="http://www.w3.org/2000/svg" height="30px" viewBox="0 -960 960 960" width="30px" fill="#e3e3e3"><path d="M120-240v-80h720v80H120Zm0-200v-80h720v80H120Zm0-200v-80h720v80H120Z"/></svg></a>
        </li>
      </ul>
    </div>
  </nav>

  <div id="home" class="box-container">
    <div class="image-wrapper">
      <video autoplay muted loop>
        <source src="458425_Rubbish_Litter_1920x1080.mp4" type="video/mp4" />
        Your browser does not support the video tag.
      </video>
      <div class="text"><h1>RIVER CleanUp</h1></div>
    </div>
  </div>

  <section class="river-cleanup" id="about">
    <div class="container">
      <h1>River Cleanup Initiative</h1>
            <p>At <strong>Your Company Name</strong>, we believe in making a positive impact on the environment and the communities around us. Our River Cleanup initiative is dedicated to preserving and restoring the natural beauty of our waterways, ensuring cleaner rivers for future generations.</p>
            <p>Our goal is to reduce pollution, protect aquatic life, and raise awareness about the importance of maintaining healthy rivers. We organize regular cleanup drives, encourage local communities to participate, and work closely with environmental organizations to drive long-term sustainability efforts.</p>
            <p>Join us in this essential cause! Together, we can make a difference, one river at a time.</p>

            <h2>How You Can Help:</h2>
      <ul>
        <li><strong>Volunteer:</strong> Participate in our river cleanup events.</li>
        <li><strong>Donate:</strong> Support our efforts to clean and restore rivers.</li>
        <li><strong>Spread the Word:</strong> Share info about river conservation.</li>
      </ul>
      <p>For more info about upcoming events, visit our <a href="program.html">Events</a> page or contact us directly.</p>
    </div>
  </section>

  <section class="events-section" id="events">
    <div class="container">
      <h1>Upcoming Cleanup Programs</h1>
      <p>Join us in our mission to clean up rivers and waterways. Here are the upcoming cleanup events where you can make a difference:</p>
      
      <% if (events && events.length > 0) { %>
        <div class="events-grid">
          <% events.forEach(event => { %>
            <div class="event-card<% if (!user) { %> not-logged-in<% } %>" onclick="handleEventClick('<%= event.address %>')">
              <div class="event-date">📅 <%= event.date %></div>
              <div class="event-address">📍 <%= event.address %></div>
              <div class="event-workers">👥 <%= event.workers %> volunteers needed</div>
              <div class="event-creator">👤 Created by: <%= event.createdBy?.name || 'Unknown' %></div>
              <p>Join us for a community cleanup event at this location. Together, we can make our waterways cleaner and healthier for everyone!</p>
            </div>
          <% }) %>
        </div>
      <% } else { %>
        <div class="no-events">
          <p>No upcoming events scheduled at the moment. Please check back later or contact us to organize a cleanup event in your area!</p>
        </div>
      <% } %>
    </div>
  </section>

  <section class="contact-us" id="contact-us">
    <div class="container">
      <h1>Contact Us</h1>
      <p>If you have any questions, suggestions, or would like to get involved, feel free to reach out to us using the contact form below or through our email and social media!</p>
      <div class="contact-info">
        <h2>Contact Information</h2>
        <p><strong>Email:</strong> HelloWord@gmail.com</p>
        <p><strong>Phone:</strong> +91 1234567890</p>
        <p><strong>Address:</strong> Fira, Santorini, Greece</p>
        <h2>Follow Us</h2>
        <p>
          <a href="#" target="_blank">Facebook</a> |
          <a href="#" target="_blank">Twitter</a> |
          <a href="#" target="_blank">Instagram</a>
        </p>
      </div>

      <form class="contact-form" id="contact-form">
        <h2>Get in Touch</h2>
        <input type="text" id="name" placeholder="Name" required />
        <input type="email" id="email" placeholder="Email" required />
        <input type="text" id="phone" placeholder="Phone" required />
        <input type="text" id="subject" placeholder="Subject" required />
        <textarea id="message" rows="5" placeholder="Message" required></textarea>
        <button type="submit" id="submit-btn">Send Message</button>
      </form>
    </div>
  </section>

  <footer>
    <p>©2025 River CleanUp</p>
  </footer>

  <script>
    // Pass user data to JavaScript safely
    window.userData = <%= user ? JSON.stringify(user) : 'null' %>;
    
    function showsidebar() {
      document.querySelector('.sidebar').style.display = 'flex';
    }

    function hidesidebar() {
      document.querySelector('.sidebar').style.display = 'none';
    }

    function redirectToLogin() {
      window.location.href = '/login';
    }

    function handleEventClick(address) {
      if (window.userData) {
        // User is logged in, redirect to program page with the event address
        const encodedAddress = encodeURIComponent(address);
        window.location.href = `/program?address=${encodedAddress}`;
      } else {
        // User not logged in, redirect to login
        window.location.href = '/login';
      }
    }

    document.querySelector('#contact-form').addEventListener('submit', async (e) => {
      e.preventDefault();
      const name = document.querySelector('#name').value.trim();
      const email = document.querySelector('#email').value.trim();
      const phone = document.querySelector('#phone').value.trim();
      const subject = document.querySelector('#subject').value.trim();
      const message = document.querySelector('#message').value.trim();

      if (!name || !email || !phone || !subject || !message) {
        alert('Please fill out all fields.');
        return;
      }

      try {
        const response = await fetch('/api/contact', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ name, email, phone, subject, message }),
        });

        if (response.ok) {
          alert('Message sent successfully!');
          document.getElementById('contact-form').reset();
        } else {
          const err = await response.json();
          alert('Failed to send: ' + (err.message || 'Unknown error'));
        }
      } catch (err) {
        alert('Error: ' + err.message);
      }
    });

    async function logout() {
      try {
        await fetch('/logout', {
          credentials: 'include'
        });
        window.location.href = '/';
      } catch (err) {
        alert("Logout failed.");
      }
    }
  </script>
</body>
</html>
